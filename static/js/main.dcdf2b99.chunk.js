(this["webpackJsonpgovtech-hackathon2021"]=this["webpackJsonpgovtech-hackathon2021"]||[]).push([[0],{15:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(0),a=n.n(s),r=n(28),i=n.n(r),o=(n(38),n(5)),l=(n(39),n(8)),d=n.n(l),j=n(9),u=(n(15),n(12)),b=n.n(u),h="https://passport-crop.azurewebsites.net",p=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=new FormData).append("user_file",t),n){e.next=8;break}return e.next=5,b.a.post(h+"/upload-file",c);case 5:s=e.sent,e.next=11;break;case 8:return e.next=10,b.a.post(h+"/upload-file-webcam",c);case 10:s=e.sent;case 11:return e.abrupt("return",s.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){var t=e.image;try{return Object(c.jsx)("img",{id:"leftImage",src:URL.createObjectURL(t),alt:t.name})}catch(n){return Object(c.jsx)("img",{id:"leftImage",src:t,alt:t.name})}},f=function(e){var t=e.loading,n=e.setLoading,s=e.file,a=e.setFile,r=(e.processed_image,e.setProcessedImage),i=e.setNotif,o=e.setTakingOne,l=e.setIssues,u=e.loadedFromWebcam,b=e.setLoadedFromWebcam,h=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),n(!0),l([]),e.prev=3,e.next=6,p(s,u);case 6:t=e.sent,r(t.image_url),l(t.issues),i({message:"Image processed succesfully!",error:!1}),setTimeout((function(){i(null)}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),i({message:"Well, this is awkward... we can't seem to find a face",error:!0}),setTimeout((function(){i(null)}),8e3);case 17:return e.prev=17,n(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[""!==s?Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Original image"}),s&&Object(c.jsx)(O,{image:s}),Object(c.jsx)("div",{className:s&&t?"dullButton":"processButton",onClick:s&&t?null:h,children:Object(c.jsx)("p",{children:s&&t?"Disabled while processing":"Process this image"})})]}):null,s&&t?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"dullButton",children:Object(c.jsx)("p",{children:" Disabled while processing... "})}),Object(c.jsx)("div",{className:"dullButton",children:Object(c.jsx)("p",{children:" Disabled while processing... "})})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{id:"selectImage",onChange:function(e){r(""),e.target.files[0]?a(e.target.files[0]):a("")},type:"file",accept:".jpg,.jpeg,.jfif,.png,.jpe,.jif,.jfi,.webp",hidden:!0}),Object(c.jsx)("div",{className:s?"dullButton":"uploadButton",onClick:function(){document.getElementById("selectImage").click(),o(!1),b(!1)},children:Object(c.jsxs)("p",{children:[" ",""===s?"Upload ":"Upload new "," image "]})}),Object(c.jsx)("div",{className:s?"dullButton":"uploadButton",onClick:function(){o(!0),a(""),r("")},children:Object(c.jsxs)("p",{children:[" ",""===s?"Take a ":"Take a new "," picture"]})})]})]})},m=n(6),g=n(7),x=function(e){var t=e.issue;return Object(c.jsx)("div",{className:"error",children:Object(c.jsxs)("span",{style:{fontSize:"11pt"},children:[Object(c.jsx)(m.a,{icon:g.c,style:{color:"red",fontSize:"10pt",paddingRight:"10px"}}),"Warning: ",t]})})},v=function(e){var t=e.processed_image,n=e.issues;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Processed image"}),Object(c.jsx)("img",{id:"rightImage",alt:t,src:t}),n.map((function(e,t){return Object(c.jsx)(x,{issue:e},t)})),Object(c.jsx)("a",{style:{textDecoration:"none",color:"black"},href:t,target:"_blank",download:!0,children:Object(c.jsx)("div",{className:"uploadButton",children:Object(c.jsxs)("p",{children:["Download",Object(c.jsx)(m.a,{icon:g.b,style:{color:"grey",fontSize:"14pt",paddingLeft:"15px"}})]})})})]})},k=n(29),w=n.n(k),N=function(){var e=Object(s.useState)("."),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){var e=setInterval((function(){return n.length>3?a("."):a(n+".")}),500);return function(){return clearInterval(e)}})),Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:["Processing ",n]}),Object(c.jsx)(w.a,{type:"Circles",color:"#00BFFF",height:100,width:100})]})},y=n(30),F=(n.p,function(){return Object(c.jsx)("footer",{className:"footer",children:Object(c.jsxs)("p",{children:["Made with",Object(c.jsx)(m.a,{icon:g.d,style:{color:"red",paddingLeft:"7px",paddingRight:"7px"}}),"by TransformToConform",Object(c.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/quan-xue/transform-conform",children:Object(c.jsx)(m.a,{icon:y.a,style:{color:"black",paddingLeft:"7px",paddingRight:"7px"}})})]})})}),I=n(16),S=n(31),B=n.n(S),C={facingMode:"user",height:400},T=function(e){var t=e.setFile,n=e.setTakingOne,s=e.setLoadedFromWebcam,r=a.a.useRef(null),i=a.a.useCallback((function(){var e=r.current.getScreenshot();fetch(e).then((function(e){return e.blob()})).then((function(e){var n=new File([e],"webcam_file"+Math.random().toString(36).substr(2,8)+".png",{type:"image/png"});t(n)})),n(!1),s(!0)}),[r]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(B.a,{ref:r,audio:!1,screenshotQuality:1,screenshotFormat:"image/png",videoConstraints:C}),Object(c.jsx)("div",{className:"uploadButton",onClick:i,children:"Take a photo"}),Object(c.jsx)("div",{className:"dullButton",onClick:function(){n(!1),s(!1)},children:"Cancel"})]})};var L=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=a.a.useState(""),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(s.useState)(null),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(s.useState)(!1),x=Object(o.a)(O,2),k=x[0],w=x[1],y=Object(s.useState)(!1),S=Object(o.a)(y,2),B=S[0],C=S[1],L=Object(s.useState)([]),P=Object(o.a)(L,2),W=P[0],_=P[1],D=Object(s.useState)(!1),R=Object(o.a)(D,2),z=R[0],U=R[1];return Object(c.jsx)(I.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("h1",{children:"Passport Photo Tool \ud83d\udcf7"}),null!==h?Object(c.jsx)("div",{className:"topPanel",children:Object(c.jsx)("div",{className:h.error?"notif error":"notif success",children:Object(c.jsx)("p",{children:h.message})})}):null,Object(c.jsx)("div",{className:"split leftPanel",children:Object(c.jsx)("div",{className:"centered",children:Object(c.jsx)(f,{loading:k,setLoading:w,file:d,setFile:j,processedImage:n,setProcessedImage:r,setNotif:p,setTakingOne:C,setIssues:_,loadedFromWebcam:z,setLoadedFromWebcam:U})})}),n?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"middleArrow",children:Object(c.jsx)(m.a,{icon:g.a,style:{color:"green",fontSize:"45pt"}})}),Object(c.jsx)("div",{className:"split rightPanel",children:Object(c.jsx)("div",{className:"centered",children:Object(c.jsx)(v,{processed_image:n,issues:W})})})]}):Object(c.jsx)("div",{className:"split rightPanel",children:Object(c.jsx)("div",{className:"centered",children:B?Object(c.jsx)(T,{setFile:j,setTakingOne:C,setLoadedFromWebcam:U}):""===d?Object(c.jsx)("p",{children:"Upload or an image or take one from your camera to be processed"}):k?Object(c.jsx)(N,{}):Object(c.jsx)("p",{children:"Click on process to view results or replace the current selection"})})}),Object(c.jsx)(F,{})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),P()}},[[86,1,2]]]);
//# sourceMappingURL=main.dcdf2b99.chunk.js.map