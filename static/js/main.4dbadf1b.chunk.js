(this["webpackJsonpgovtech-hackathon2021"]=this["webpackJsonpgovtech-hackathon2021"]||[]).push([[0],{14:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),i=n.n(c),r=n(27),a=n.n(r),l=(n(37),n(5)),o=(n(38),n(6)),j=n.n(o),d=n(9),u=(n(14),n(15)),b=n.n(u),h=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("user_file",t),e.next=4,b.a.post("https://passport-crop.azurewebsites.net/upload-file",n);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.image;try{return Object(s.jsx)("img",{id:"leftImage",src:URL.createObjectURL(t),alt:t.name})}catch(n){return Object(s.jsx)("img",{id:"leftImage",src:t,alt:t.name})}},O=function(e){var t=e.loading,n=e.setLoading,c=e.file,i=e.setFile,r=(e.processed_image,e.setProcessedImage),a=e.setNotif,l=e.setTakingOne,o=e.setIssues,u=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),n(!0),o([]),e.prev=3,e.next=6,h(c);case 6:t=e.sent,r(t.image_url),o(t.issues),a({message:"Image processed succesfully!",error:!1}),setTimeout((function(){a(null)}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),a({message:"Well, this is awkward... we can't seem to find a face",error:!0}),setTimeout((function(){a(null)}),8e3);case 17:return e.prev=17,n(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[""!==c?Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Original image"}),c&&Object(s.jsx)(p,{image:c}),Object(s.jsx)("div",{className:c&&t?"dullButton":"processButton",onClick:c&&t?null:u,children:Object(s.jsx)("p",{children:c&&t?"Disabled while processing":"Process this image"})})]}):null,c&&t?Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"dullButton",children:Object(s.jsx)("p",{children:" Disabled while processing... "})}),Object(s.jsx)("div",{className:"dullButton",children:Object(s.jsx)("p",{children:" Disabled while processing... "})})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"selectImage",onChange:function(e){r(""),e.target.files[0]?i(e.target.files[0]):i("")},type:"file",accept:".jpg,.jpeg,.jfif,.png,.jpe,.jif,.jfi,.webp",hidden:!0}),Object(s.jsx)("div",{className:c?"dullButton":"uploadButton",onClick:function(){document.getElementById("selectImage").click(),l(!1)},children:Object(s.jsxs)("p",{children:[" ",""===c?"Upload ":"Upload new "," image "]})}),Object(s.jsx)("div",{className:c?"dullButton":"uploadButton",onClick:function(){l(!0),i(""),r("")},children:Object(s.jsxs)("p",{children:[" ",""===c?"Take a ":"Take a new "," picture"]})})]})]})},g=n(7),f=n(8),x=function(e){var t=e.issue;return Object(s.jsx)("div",{className:"error",children:Object(s.jsxs)("span",{style:{fontSize:"11pt"},children:[Object(s.jsx)(g.a,{icon:f.c,style:{color:"red",fontSize:"10pt",paddingRight:"10px"}}),"Warning: ",t]})})},m=function(e){var t=e.processed_image,n=e.issues;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Processed image"}),Object(s.jsx)("img",{id:"rightImage",alt:t,src:t}),n.map((function(e,t){return Object(s.jsx)(x,{issue:e},t)})),Object(s.jsx)("a",{style:{textDecoration:"none",color:"black"},href:t,target:"_blank",download:!0,children:Object(s.jsx)("div",{className:"uploadButton",children:Object(s.jsxs)("p",{children:["Download",Object(s.jsx)(g.a,{icon:f.b,style:{color:"grey",fontSize:"14pt",paddingLeft:"15px"}})]})})})]})},v=n(28),k=n.n(v),w=function(){var e=Object(c.useState)("."),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return n.length>3?i("."):i(n+".")}),500);return function(){return clearInterval(e)}})),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Processing ",n]}),Object(s.jsx)(k.a,{type:"Circles",color:"#00BFFF",height:100,width:100})]})},N=n(31),y=n(29),I=n.n(y),B={facingMode:"user",height:400},S=function(e){var t=e.setFile,n=e.setTakingOne,c=i.a.useRef(null),r=i.a.useCallback((function(){var e=c.current.getScreenshot();fetch(e).then((function(e){return e.blob()})).then((function(e){var n=new File([e],"webcam_file"+Math.random().toString(36).substr(2,8)+".png",{type:"image/png"});t(n)})),n(!1)}),[c]);return Object(s.jsxs)("div",{children:[Object(s.jsx)(I.a,{ref:c,audio:!1,screenshotQuality:1,screenshotFormat:"image/png",videoConstraints:B}),Object(s.jsx)("div",{className:"uploadButton",onClick:r,children:"Take a photo"}),Object(s.jsx)("div",{className:"dullButton",onClick:function(){n(!1)},children:"Cancel"})]})};var C=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=i.a.useState(""),o=Object(l.a)(a,2),j=o[0],d=o[1],u=Object(c.useState)(null),b=Object(l.a)(u,2),h=b[0],p=b[1],x=Object(c.useState)(!1),v=Object(l.a)(x,2),k=v[0],y=v[1],I=Object(c.useState)(!1),B=Object(l.a)(I,2),C=B[0],F=B[1],P=Object(c.useState)([]),T=Object(l.a)(P,2),D=T[0],L=T[1];return Object(s.jsx)(N.a,{children:Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h1",{children:"Passport Photo Tool \ud83d\udcf7"}),null!==h?Object(s.jsx)("div",{className:"topPanel",children:Object(s.jsx)("div",{className:h.error?"notif error":"notif success",children:Object(s.jsx)("p",{children:h.message})})}):null,Object(s.jsx)("div",{className:"split leftPanel",children:Object(s.jsx)("div",{className:"centered",children:Object(s.jsx)(O,{loading:k,setLoading:y,file:j,setFile:d,processedImage:n,setProcessedImage:r,setNotif:p,setTakingOne:F,setIssues:L})})}),n?Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"middleArrow",children:Object(s.jsx)(g.a,{icon:f.a,style:{color:"green",fontSize:"45pt"}})}),Object(s.jsx)("div",{className:"split rightPanel",children:Object(s.jsx)("div",{className:"centered",children:Object(s.jsx)(m,{processed_image:n,issues:D})})})]}):Object(s.jsx)("div",{className:"split rightPanel",children:Object(s.jsx)("div",{className:"centered",children:C?Object(s.jsx)(S,{setFile:d,setTakingOne:F}):""===j?Object(s.jsx)("p",{children:"Upload or an image or take one from your camera to be processed"}):k?Object(s.jsx)(w,{}):Object(s.jsx)("p",{children:"Click on process to view results or replace the current selection"})})})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),i(e),r(e)}))};a.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(C,{})}),document.getElementById("root")),F()}},[[85,1,2]]]);
//# sourceMappingURL=main.4dbadf1b.chunk.js.map