{"version":3,"sources":["services/ApiService.js","components/LeftPanel.js","components/RightPanel.js","components/Loading.js","components/Webcam.js","App.js","reportWebVitals.js","index.js"],"names":["sendUpload","file","a","data","FormData","append","axios","post","END_POINT","response","ImageThumb","image","console","log","id","src","URL","createObjectURL","alt","name","e","LeftPanel","loading","setLoading","setFile","setProcessedImage","processed_image","setNotif","setTakingOne","confirmSendUpload","message","error","setTimeout","className","onClick","onChange","event","target","files","type","accept","hidden","document","getElementById","click","RightPanel","style","textDecoration","color","href","download","icon","faDownload","fontSize","paddingLeft","LoadingComponent","useState","count","setCount","useEffect","timer","setInterval","length","clearInterval","height","width","videoConstraints","facingMode","WebcamComponent","webcamRef","React","useRef","capture","useCallback","imageSrc","current","getScreenshot","fetch","then","res","blob","File","Math","random","toString","substr","ref","audio","screenshotQuality","screenshotFormat","App","notif","takingOne","processedImage","faArrowCircleRight","Webcam","Loading","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.e0dbbf18.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst END_POINT = process.env.NODE_ENV === \"development\" ? process.env.REACT_APP_LOCAL_ENDPOINT : process.env.REACT_APP_PROD_ENDPOINT\r\nexport const sendUpload  = async (file) => {\r\n    const data = new FormData()\r\n    data.append('user_file', file)\r\n    const response = await axios.post(END_POINT+\"/upload-file\", data)\r\n    return response.data\r\n}\r\n\r\nexport const startDownload = async (url) => {\r\n    const resp = await axios.get(url);\r\n    console.log(resp)\r\n    return resp\r\n}","import React, { useState } from 'react';\r\nimport '../Panel.css';\r\nimport { sendUpload } from \"../services/ApiService\"\r\n\r\nconst LeftPanel = ({loading, setLoading, file, setFile, processed_image, setProcessedImage, setNotif, setTakingOne}) => {\r\n    \r\n    const uploadAnImage = () => {\r\n        document.getElementById(\"selectImage\").click()\r\n        setTakingOne(false)\r\n    }\r\n\r\n    const fileSelectHandler = (event) => {\r\n        setProcessedImage(\"\")\r\n        if (event.target.files[0])\r\n            setFile(event.target.files[0]);\r\n        else\r\n            setFile(\"\")\r\n    }\r\n\r\n    const confirmSendUpload = async () => {\r\n        setProcessedImage(\"\")\r\n        setLoading(true)\r\n        try {\r\n            const response = await sendUpload(file)\r\n            setProcessedImage(response)\r\n            \r\n            setNotif({\r\n                message: 'Image processed succesfully!',\r\n                error: false\r\n            })\r\n            setTimeout(() => {\r\n                setNotif(null)\r\n              }, 5000)\r\n        }    \r\n        catch (exception) {\r\n            // setError(true)\r\n            setNotif({\r\n                message: exception.message || 'Exception occured while uploading the image!',\r\n                error: true\r\n            })\r\n            setTimeout(() => {\r\n                setNotif(null)\r\n              }, 5000)\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    const webcamUpload = () => {\r\n        setTakingOne(true)\r\n        setFile(\"\")\r\n        setProcessedImage(\"\")\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                file !== \"\" ? \r\n                <div>\r\n                    <h3>Original image</h3>\r\n                    {/* <img alt=\"uploaded_image\" src={props.initialImage} /> */}\r\n                    {file && <ImageThumb image={file} />}\r\n                    <div className={(file && loading) ? \"dullButton\": \"uploadButton\"} onClick={(file && loading) ? null: confirmSendUpload} >\r\n                        <p>{(file && loading) ? \"Disabled while processing\": \"Process this image\"}</p>\r\n                    </div>\r\n                </div>\r\n                : null\r\n            }\r\n            {\r\n                !(file && loading) ?\r\n                <div>\r\n                    <input id=\"selectImage\" onChange={fileSelectHandler} type=\"file\" accept=\".jpg,.jpeg,.jfif,.png,.jpe,.jif,.jfi,.webp\"  hidden />\r\n                    <div className={ file ? \"dullButton\": \"uploadButton\"} onClick={uploadAnImage}>\r\n                        <p> {file === \"\" ? \"Upload an\": \"Replace with another\"} image from your computer</p>\r\n                    </div> \r\n                    <div className={ file ? \"dullButton\": \"uploadButton\"} onClick={webcamUpload}>\r\n                        <p> {file === \"\" ? \"Take a picture\": \"Replace with another\"} from your camera</p>\r\n                    </div> \r\n                </div>\r\n                :\r\n                <div>\r\n                    <div className=\"dullButton\" >\r\n                        <p> Disabled while processing... </p>\r\n                    </div> \r\n                    <div className=\"dullButton\">\r\n                        <p> Disabled while processing... </p>\r\n                    </div> \r\n                </div>\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * Component to display thumbnail of image.\r\n */\r\nconst ImageThumb = ({ image }) => {\r\n    console.log(image)\r\n    try {\r\n        return <img id=\"leftImage\" src={URL.createObjectURL(image)} alt={image.name} />;\r\n    } catch(e) {\r\n        return <img id=\"leftImage\" src={image} alt={image.name} />;\r\n    }\r\n    \r\n  };\r\n\r\nexport default LeftPanel","import React from \"react\"\r\nimport '../Panel.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faDownload } from '@fortawesome/free-solid-svg-icons'\r\nimport { startDownload } from '../services/ApiService'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nconst RightPanel = ({processed_image}) => {\r\n\r\n    return (\r\n        <div>\r\n            <h3>Processed image</h3>\r\n            <img id=\"rightImage\" alt={processed_image} src={processed_image}/>\r\n            <a style={{textDecoration: \"none\", color: \"black\"}} href={processed_image} target=\"_blank\" download>\r\n                <div className=\"uploadButton\">\r\n                    <p>Download \r\n                        <FontAwesomeIcon icon={faDownload} style={{color: \"grey\", fontSize: \"14pt\", paddingLeft: \"15px\"}}/>\r\n                    </p>\r\n                </div>\r\n            </a>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default RightPanel","import React, { useState, useEffect } from \"react\"\r\nimport Loader from 'react-loader-spinner'\r\n\r\n\r\n\r\nconst LoadingComponent = () => {\r\n\r\n    const [count, setCount] = useState(\".\")\r\n   \r\n   useEffect(() => {\r\n    const timer = setInterval(() => count.length > 3 ? setCount(\".\"): setCount(count + \".\"), 500)\r\n    return () => clearInterval(timer)\r\n   })\r\n\r\n    return (\r\n        <div>\r\n            <p>Processing {count}</p>\r\n            <Loader\r\n            type=\"Circles\"\r\n            color=\"#00BFFF\"\r\n            height={100}\r\n            width={100}\r\n            />\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\n\r\nexport default LoadingComponent","import Webcam from \"react-webcam\"\r\nimport React from \"react\"\r\nimport \"../Panel.css\"\r\n\r\nconst videoConstraints = {\r\n    facingMode: \"user\",\r\n    height: 400\r\n  };\r\n\r\nconst WebcamComponent = ({setFile, setTakingOne}) => {\r\n\r\n    const webcamRef = React.useRef(null);\r\n \r\n    const capture = React.useCallback(\r\n        () => {\r\n        const imageSrc = webcamRef.current.getScreenshot();\r\n        // var base64ImageContent = imageSrc.replace(/^data:image\\/(png|jpg);base64,/, \"\");\r\n        // const blob = base64ToBlob(base64ImageContent, \"image/png\")\r\n        // setFile(blob)\r\n        fetch(imageSrc)\r\n        .then(res => res.blob())\r\n        .then(blob => {\r\n            const file = new File([blob], \"webcam_file\" + Math.random().toString(36).substr(2, 8) + \".png\",{ type: \"image/png\" })\r\n            setFile(file)\r\n        })\r\n        setTakingOne(false)\r\n        },\r\n        [webcamRef]\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Webcam ref={webcamRef} audio={false} screenshotQuality={1} screenshotFormat=\"image/png\" videoConstraints={videoConstraints} />\r\n\r\n            <div className=\"uploadButton\" onClick={capture}>Take a photo</div>\r\n            <div className=\"dullButton\" onClick={() => { setTakingOne(false) }}>Cancel</div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default WebcamComponent","import './App.css';\r\nimport React, { useState } from \"react\"\r\nimport LeftPanel from \"./components/LeftPanel\"\r\nimport RightPanel from \"./components/RightPanel\"\r\nimport LoadingComponent from \"./components/Loading\"\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faArrowCircleRight } from '@fortawesome/free-solid-svg-icons'\r\nimport { BrowserRouter } from \"react-router-dom\"\r\nimport WebcamComponent from './components/Webcam';\r\n\r\nfunction App() {\r\n\r\n  const [processed_image, setProcessedImage] = useState(\"\");\r\n  const [file, setFile] = React.useState(\"\");\r\n  const [notif, setNotif] = useState(null);\r\n  const [loading, setLoading] = useState(false)\r\n  const [takingOne, setTakingOne] = useState(false)\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <div className=\"App\">\r\n        <h1>Passport Photo Tool 📷</h1>\r\n        {\r\n          notif !== null \r\n          ?\r\n          <div className=\"topPanel\">\r\n            <div className={notif.error ? \"notif error\": \"notif success\"}>\r\n                <p>\r\n                  {notif.message}\r\n                </p>\r\n            </div>\r\n          </div>\r\n          :\r\n          null\r\n        }\r\n        \r\n\r\n        <div className=\"split leftPanel\"> \r\n          <div className=\"centered\">\r\n            <LeftPanel loading={loading} setLoading={setLoading} file={file} setFile={setFile} processedImage={processed_image} setProcessedImage={setProcessedImage} setNotif={setNotif} setTakingOne={setTakingOne} />\r\n          </div>\r\n        </div>\r\n        {\r\n          processed_image ? \r\n          <div>\r\n            <div className=\"middleArrow\">\r\n              <FontAwesomeIcon icon={faArrowCircleRight} style={{color: \"green\", fontSize: \"45pt\"}}/>\r\n            </div>\r\n\r\n            <div className=\"split rightPanel\">\r\n              <div className=\"centered\">\r\n                <RightPanel processed_image={processed_image} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          :\r\n          <div className=\"split rightPanel\">\r\n            <div className=\"centered\">\r\n              {\r\n                takingOne ?\r\n                <WebcamComponent setFile={setFile} setTakingOne={setTakingOne} />\r\n                :\r\n                file === \"\" ? \r\n                <p>Upload or an image or take one from your camera to be processed</p>\r\n                :\r\n                loading ?\r\n                <LoadingComponent />\r\n                :\r\n                <p>Click on process to view results or replace the current selection</p>\r\n              }\r\n              \r\n            </div>\r\n          </div>\r\n        }\r\n        \r\n      </div>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}